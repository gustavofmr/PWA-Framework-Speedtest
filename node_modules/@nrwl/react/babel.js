/*
 * Babel preset to provide React support for Nx.
 */
module.exports = function (api, options) {
    api.assertVersion(7);
    const env = api.env();
    return {
        presets: [
            ['@nrwl/web/babel', { useBuiltIns: options.useBuiltIns }],
            [
                require.resolve('@babel/preset-react'),
                getReactPresetOptions({
                    presetOptions: options,
                    env,
                }),
            ],
        ],
    };
};
function getReactPresetOptions({ presetOptions, env }) {
    var _a;
    const reactPresetOptions = {
        runtime: (_a = presetOptions.runtime) !== null && _a !== void 0 ? _a : 'automatic',
        development: env !== 'production',
    };
    // JSX spread is transformed into object spread in `@babel/plugin-transform-react-jsx`
    // `useBuiltIns` will be removed in Babel 8.
    if (reactPresetOptions.runtime === 'automatic') {
        reactPresetOptions.useBuiltIns = true;
    }
    if (presetOptions.importSource) {
        reactPresetOptions.importSource = presetOptions.importSource;
    }
    return reactPresetOptions;
}
//# sourceMappingURL=babel.js.map