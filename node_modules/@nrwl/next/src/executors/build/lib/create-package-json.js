"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createPackageJson = void 0;
const project_graph_1 = require("@nrwl/workspace/src/core/project-graph");
const fileutils_1 = require("@nrwl/workspace/src/utilities/fileutils");
const create_package_json_1 = require("@nrwl/workspace/src/utilities/create-package-json");
function createPackageJson(options, context) {
    const depGraph = project_graph_1.createProjectGraph();
    const packageJson = create_package_json_1.createPackageJson(context.projectName, depGraph, {
        root: context.root,
        projectRoot: context.workspace.projects[context.projectName].sourceRoot,
    });
    if (!packageJson.scripts) {
        packageJson.scripts = {};
    }
    packageJson.scripts.start = 'next start';
    if (!packageJson.devDependencies) {
        packageJson.devDependencies = {};
    }
    const nrwlWorkspaceNode = depGraph.nodes['npm:@nrwl/workspace'];
    if (nrwlWorkspaceNode) {
        packageJson.devDependencies['@nrwl/workspace'] =
            nrwlWorkspaceNode.data.version;
    }
    fileutils_1.writeJsonFile(`${options.outputPath}/package.json`, packageJson);
}
exports.createPackageJson = createPackageJson;
//# sourceMappingURL=create-package-json.js.map